"use strict";var e=require("../migrator.cjs"),r=require("../index-59b7992d.cjs");require("node:crypto"),require("node:fs"),require("node:path"),exports.migrate=async function(i,a,t){const s=e.readMigrationFiles(t),o=r.sql`
		CREATE TABLE IF NOT EXISTS "__drizzle_migrations" (
			id SERIAL PRIMARY KEY,
			hash text NOT NULL,
			created_at numeric
		)
	`;await i.run(o);const d=(await i.values(r.sql`SELECT id, hash, created_at FROM "__drizzle_migrations" ORDER BY created_at DESC LIMIT 1`))[0]??void 0,n=[];for(const e of s)(!d||Number(d[2])<e.folderMillis)&&n.push(...e.sql,`INSERT INTO "__drizzle_migrations" ("hash", "created_at") VALUES('${e.hash}', '${e.folderMillis}')`);await a(n)};
//# sourceMappingURL=migrator.cjs.map
