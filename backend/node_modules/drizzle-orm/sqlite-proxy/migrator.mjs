import{readMigrationFiles as t}from"../migrator.mjs";import{s as i}from"../index-b71998f1.mjs";import"node:crypto";import"node:fs";import"node:path";async function r(r,a,o){const e=t(o),s=i`
		CREATE TABLE IF NOT EXISTS "__drizzle_migrations" (
			id SERIAL PRIMARY KEY,
			hash text NOT NULL,
			created_at numeric
		)
	`;await r.run(s);const d=(await r.values(i`SELECT id, hash, created_at FROM "__drizzle_migrations" ORDER BY created_at DESC LIMIT 1`))[0]??void 0,m=[];for(const t of e)(!d||Number(d[2])<t.folderMillis)&&m.push(...t.sql,`INSERT INTO "__drizzle_migrations" ("hash", "created_at") VALUES('${t.hash}', '${t.folderMillis}')`);await a(m)}export{r as migrate};
//# sourceMappingURL=migrator.mjs.map
