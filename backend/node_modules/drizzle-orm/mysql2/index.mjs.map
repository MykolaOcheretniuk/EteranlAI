{"version":3,"file":"index.mjs","sources":["../../src/mysql2/session.ts","../../src/mysql2/driver.ts"],"sourcesContent":[null,null],"names":["MySql2PreparedQuery","PreparedQuery","constructor","client","queryString","params","logger","fields","super","this","rawQuery","sql","typeCast","field","next","type","string","query","rowsAsArray","async","placeholderValues","fillPlaceholders","logQuery","joinsNotNullableMap","then","result","map","row","mapResultRow","conn","isPool","getConnection","connection","stream","dataListener","pause","on","onEnd","once","onError","resume","Promise","race","resolve","undefined","Array","isArray","length","Error","off","end","MySql2Session","MySqlSession","dialect","options","NoopLogger","prepareQuery","values","all","querySql","sqlToQuery","execute","transaction","config","session","tx","MySql2Transaction","setTransactionConfigSql","getSetTransactionSQL","startTransactionSql","getStartTransactionSQL","err","release","MySqlTransaction","savepointName","nestedIndex","raw","MySql2Driver","createSession","drizzle","MySqlDialect","DefaultLogger","promise","isCallbackClient","MySqlDatabase"],"mappings":"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"}