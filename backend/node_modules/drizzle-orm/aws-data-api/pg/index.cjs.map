{"version":3,"file":"index.cjs","sources":["../../../src/aws-data-api/common/index.ts","../../../src/aws-data-api/pg/session.ts","../../../src/aws-data-api/pg/driver.ts"],"sourcesContent":[null,null,null],"names":["typingsToAwsTypeHint","typings","TypeHint","DATE","DECIMAL","JSON","TIME","TIMESTAMP","UUID","toValueParam","value","response","typeHint","isNull","stringValue","split","Number","isInteger","longValue","booleanValue","Date","Error","toISOString","replace","doubleValue","AwsDataApiPreparedQuery","PreparedQuery","constructor","client","queryString","params","options","fields","transactionId","super","this","rawQuery","ExecuteStatementCommand","sql","parameters","secretArn","resourceArn","database","async","placeholderValues","fillPlaceholders","input","map","param","index","name","logger","logQuery","joinsNotNullableMap","send","records","result","mappedResult","res","row","undefined","blobValue","arrayValue","stringValues","getValueFromDataApi","mapResultRow","all","execute","AwsDataApiSession","PgSession","dialect","prepareQuery","query","sqlToQuery","transaction","config","BeginTransactionCommand","session","tx","AwsDataApiTransaction","setTransaction","CommitTransactionCommand","e","RollbackTransactionCommand","PgTransaction","savepointName","nestedIndex","AwsDataApiDriver","createSession","AwsPgDialect","PgDialect","escapeName","escapeParam","num","DefaultLogger","PgDatabase"],"mappings":"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"}