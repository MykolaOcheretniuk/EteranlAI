import{d as e,s as c,T as a,v as f}from"../index-b71998f1.mjs";import{M as m,a as d,b,c as S,d as T,m as L,e as $,F as D,f as N}from"../session-8a621f09.mjs";export{E as ExtraConfigBuilder,i as ForeignKey,I as InlineForeignKeys,y as ManualViewBuilder,g as MySqlDatabase,k as MySqlDelete,h as MySqlDialect,n as MySqlInsert,l as MySqlInsertBuilder,q as MySqlSelect,o as MySqlSelectBuilder,p as MySqlSelectQueryBuilder,t as MySqlSession,u as MySqlTransaction,s as MySqlUpdate,r as MySqlUpdateBuilder,A as MySqlView,z as MySqlViewBase,P as PreparedQuery,Q as QueryBuilder,x as ViewBuilder,V as ViewBuilderCore,j as foreignKey,v as mysqlTable,w as mysqlTableCreator,B as mysqlView}from"../session-8a621f09.mjs";import"../utils-e6870670.mjs";import"../query-promise-a65edd44.mjs";import"../column-builder-592f0191.mjs";import"../query-builder-2fcde2f0.mjs";function F(s,t){return new Proxy(s,new e(t,!1))}class M{constructor(e,s){this.name=e,this.value=s}build(e){return new C(e,this)}}class C{constructor(e,s){this.table=e,this.name=s.name,this.value=s.value}}function O(e,s){return new M(e,s)}class K extends m{build(e){return new U(e,this.config)}}class U extends d{getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class _ extends m{build(e){return new J(e,this.config)}}class J extends d{getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function Y(e,s){return"number"===s.mode?new K(e):new _(e)}class G extends b{constructor(e,s){super(e),this.config.length=s}build(e){return new H(e,this.config)}}class H extends S{constructor(){super(...arguments),this.length=this.config.length}getSQLType(){return void 0===this.length?"binary":`binary(${this.length})`}}function R(e,s={}){return new G(e,s.length)}class W extends b{build(e){return new X(e,this.config)}}class X extends S{getSQLType(){return"boolean"}mapFromDriverValue(e){return"boolean"==typeof e?e:1===e}}function Z(e){return new W(e)}class ee extends b{constructor(e,s){super(e),this.config.length=s.length,this.config.enum=s.enum}build(e){return new se(e,this.config)}}class se extends S{constructor(){super(...arguments),this.length=this.config.length,this.enumValues=this.config.enum??[]}getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function te(e,s={}){return new ee(e,s)}class ne extends b{constructor(e,s,t){super(e),this.config.fieldConfig=s,this.config.customTypeParams=t}build(e){return new re(e,this.config)}}class re extends S{constructor(e,s){super(e,s),this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function ie(e){return(s,t)=>new ne(s,t,e)}class ue extends b{build(e){return new oe(e,this.config)}}class oe extends S{constructor(e,s){super(e,s)}getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}}class ce extends b{build(e){return new ae(e,this.config)}}class ae extends S{constructor(e,s){super(e,s)}getSQLType(){return"date"}}function le(e,s={}){return"string"===s.mode?new ce(e):new ue(e)}class he extends b{constructor(e,s){super(e),this.config.fsp=s?.fsp}build(e){return new fe(e,this.config)}}class fe extends S{constructor(e,s){super(e,s),this.fsp=s.fsp}getSQLType(){return`datetime${void 0===this.fsp?"":`(${this.fsp})`}`}mapFromDriverValue(e){return new Date(e)}}class pe extends b{constructor(e,s){super(e),this.config.fsp=s?.fsp}build(e){return new ge(e,this.config)}}class ge extends S{constructor(e,s){super(e,s),this.fsp=s.fsp}getSQLType(){return`datetime${void 0===this.fsp?"":`(${this.fsp})`}`}}function me(e,s={}){return"string"===s.mode?new pe(e,s):new he(e,s)}class de extends m{constructor(e,s,t){super(e),this.config.precision=s,this.config.scale=t}build(e){return new ye(e,this.config)}}class ye extends d{constructor(){super(...arguments),this.precision=this.config.precision,this.scale=this.config.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`decimal(${this.precision},${this.scale})`:void 0===this.precision?"decimal":`decimal(${this.precision})`}}function we(e,s={}){return new de(e,s.precision,s.scale)}class be extends m{constructor(e,s){super(e),this.config.precision=s?.precision,this.config.scale=s?.scale}build(e){return new xe(e,this.config)}}class xe extends d{constructor(){super(...arguments),this.precision=this.config.precision,this.scale=this.config.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`double(${this.precision},${this.scale})`:void 0===this.precision?"double":`double(${this.precision})`}}function Se(e,s){return new be(e,s)}class ve extends b{constructor(e,s){super(e),this.config.enumValues=s}build(e){return new Te(e,this.config)}}class Te extends S{constructor(){super(...arguments),this.enumValues=this.config.enumValues}getSQLType(){return`enum(${this.enumValues.map((e=>`'${e}'`)).join(",")})`}}function Qe(e,s){if(0===s.length)throw new Error(`You have an empty array for "${e}" enum values`);return new ve(e,s)}class Ve extends m{build(e){return new Le(e,this.config)}}class Le extends d{getSQLType(){return"float"}}function $e(e){return new Ve(e)}class qe extends m{build(e){return new De(e,this.config)}}class De extends d{getSQLType(){return"int"}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function Ne(e){return new qe(e)}class Fe extends b{build(e){return new Me(e,this.config)}}class Me extends S{getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}}function je(e){return new Fe(e)}class Be extends m{build(e){return new Ce(e,this.config)}}class Ce extends d{getSQLType(){return"mediumint"}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function Ie(e){return new Be(e)}class Oe extends m{constructor(e,s){super(e),this.config.precision=s?.precision,this.config.scale=s?.scale}build(e){return new Pe(e,this.config)}}class Pe extends d{constructor(){super(...arguments),this.precision=this.config.precision,this.scale=this.config.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`real(${this.precision}, ${this.scale})`:void 0===this.precision?"real":`real(${this.precision})`}}function Ke(e,s={}){return new Oe(e,s)}class Ue extends m{constructor(e){super(e),this.config.hasDefault=!0,this.config.autoIncrement=!0}build(e){return new ke(e,this.config)}}class ke extends d{getSQLType(){return"serial"}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function Ee(e){return new Ue(e)}class _e extends m{build(e){return new ze(e,this.config)}}class ze extends d{getSQLType(){return"smallint"}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function Ae(e){return new _e(e)}class Je extends b{constructor(e,s,t){super(e),this.config.textType=s,this.config.enumValues=t.enum}build(e){return new Ye(e,this.config)}}class Ye extends S{constructor(){super(...arguments),this.textType=this.config.textType,this.enumValues=this.config.enumValues??[]}getSQLType(){return this.textType}}function Ge(e,s={}){return new Je(e,"text",s)}function He(e,s={}){return new Je(e,"tinytext",s)}function Re(e,s={}){return new Je(e,"mediumtext",s)}function We(e,s={}){return new Je(e,"longtext",s)}class Xe extends b{constructor(e,s){super(e),this.config.fsp=s?.fsp}build(e){return new Ze(e,this.config)}}class Ze extends S{constructor(){super(...arguments),this.fsp=this.config.fsp}getSQLType(){return`time${void 0===this.fsp?"":`(${this.fsp})`}`}}function es(e,s){return new Xe(e,s)}class ss extends b{defaultNow(){return this.default(c`(now())`)}onUpdateNow(){return this.config.hasOnUpdateNow=!0,this.config.hasDefault=!0,this}}class ts extends S{constructor(){super(...arguments),this.hasOnUpdateNow=this.config.hasOnUpdateNow}}class ns extends ss{constructor(e,s){super(e),this.config.fsp=s?.fsp}build(e){return new rs(e,this.config)}}class rs extends ts{constructor(){super(...arguments),this.fsp=this.config.fsp}getSQLType(){return`timestamp${void 0===this.fsp?"":`(${this.fsp})`}`}mapFromDriverValue(e){return new Date(e+"+0000")}mapToDriverValue(e){return e.toISOString().slice(0,19).replace("T"," ")}}class is extends ss{constructor(e,s){super(e),this.config.fsp=s?.fsp}build(e){return new us(e,this.config)}}class us extends ts{constructor(){super(...arguments),this.fsp=this.config.fsp}getSQLType(){return`timestamp${void 0===this.fsp?"":`(${this.fsp})`}`}}function os(e,s={}){return"string"===s.mode?new is(e,s):new ns(e,s)}class cs extends m{build(e){return new as(e,this.config)}}class as extends d{getSQLType(){return"tinyint"}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function ls(e){return new cs(e)}class hs extends b{constructor(e,s){super(e),this.config.length=s?.length}build(e){return new fs(e,this.config)}}class fs extends S{constructor(){super(...arguments),this.length=this.config.length}getSQLType(){return void 0===this.length?"varbinary":`varbinary(${this.length})`}}function ps(e,s){return new hs(e,s)}class gs extends b{constructor(e,s){super(e),this.config.length=s.length,this.config.enum=s.enum}build(e){return new ms(e,this.config)}}class ms extends S{constructor(){super(...arguments),this.length=this.config.length,this.enumValues=this.config.enum??[]}getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function ds(e,s){return new gs(e,s)}class ys extends b{build(e){return new ws(e,this.config)}}class ws extends S{getSQLType(){return"year"}}function bs(e){return new ys(e)}class xs{constructor(e,s){this.name=e,this.unique=s}on(...e){return new Ss(this.name,e,this.unique)}}class Ss{constructor(e,s,t){this.config={name:e,columns:s,unique:t}}using(e){return this.config.using=e,this}algorythm(e){return this.config.algorythm=e,this}lock(e){return this.config.lock=e,this}build(e){return new vs(this.config,e)}}class vs{constructor(e,s){this.config={...e,table:s}}}function Ts(e){return new xs(e,!1)}function Qs(e){return new xs(e,!0)}function Vs(...e){return new Ls(e)}class Ls{constructor(e){this.columns=e}build(e){return new $s(e,this.columns)}}class $s{constructor(e,s){this.table=e,this.columns=s}getName(){return`${this.table[T.Symbol.Name]}_${this.columns.map((e=>e.name)).join("_")}_pk`}}class qs{constructor(e){this.schemaName=e,this.table=(e,s,t)=>L(e,s,t,this.schemaName),this.view=(e,s)=>$(e,s,this.schemaName)}}function Ds(e){return e instanceof qs}function Ns(e){return new qs(e)}const Fs=Ns;function Ms(e){const s=Object.values(e[T.Symbol.Columns]),t=[],n=[],r=[],i=Object.values(e[T.Symbol.InlineForeignKeys]),u=e[a.Symbol.Name],o=e[a.Symbol.Schema],c=e[a.Symbol.BaseName],l=e[T.Symbol.ExtraConfigBuilder];if(void 0!==l){const s=l(e[T.Symbol.Columns]);for(const u of Object.values(s))u instanceof Ss?t.push(u.build(e)):u instanceof M?n.push(u.build(e)):u instanceof Ls?r.push(u.build(e)):u instanceof D&&i.push(u.build(e))}return{columns:s,indexes:t,foreignKeys:i,checks:n,primaryKeys:r,name:u,schema:o,baseName:c}}function js(e){return{...e[f],...e[N]}}export{C as Check,M as CheckBuilder,D as ForeignKeyBuilder,vs as Index,Ss as IndexBuilder,xs as IndexBuilderOn,U as MySqlBigInt53,K as MySqlBigInt53Builder,J as MySqlBigInt64,_ as MySqlBigInt64Builder,H as MySqlBinary,G as MySqlBinaryBuilder,X as MySqlBoolean,W as MySqlBooleanBuilder,se as MySqlChar,ee as MySqlCharBuilder,S as MySqlColumn,b as MySqlColumnBuilder,m as MySqlColumnBuilderWithAutoIncrement,d as MySqlColumnWithAutoIncrement,re as MySqlCustomColumn,ne as MySqlCustomColumnBuilder,oe as MySqlDate,ue as MySqlDateBuilder,ae as MySqlDateString,ce as MySqlDateStringBuilder,fe as MySqlDateTime,he as MySqlDateTimeBuilder,ge as MySqlDateTimeString,pe as MySqlDateTimeStringBuilder,ye as MySqlDecimal,de as MySqlDecimalBuilder,xe as MySqlDouble,be as MySqlDoubleBuilder,Te as MySqlEnumColumn,ve as MySqlEnumColumnBuilder,Le as MySqlFloat,Ve as MySqlFloatBuilder,De as MySqlInt,qe as MySqlIntBuilder,Me as MySqlJson,Fe as MySqlJsonBuilder,Ce as MySqlMediumInt,Be as MySqlMediumIntBuilder,Pe as MySqlReal,Oe as MySqlRealBuilder,qs as MySqlSchema,ke as MySqlSerial,Ue as MySqlSerialBuilder,ze as MySqlSmallInt,_e as MySqlSmallIntBuilder,T as MySqlTable,Ye as MySqlText,Je as MySqlTextBuilder,Ze as MySqlTime,Xe as MySqlTimeBuilder,rs as MySqlTimestamp,ns as MySqlTimestampBuilder,us as MySqlTimestampString,is as MySqlTimestampStringBuilder,as as MySqlTinyInt,cs as MySqlTinyIntBuilder,fs as MySqlVarBinary,hs as MySqlVarBinaryBuilder,ms as MySqlVarChar,gs as MySqlVarCharBuilder,N as MySqlViewConfig,ws as MySqlYear,ys as MySqlYearBuilder,$s as PrimaryKey,Ls as PrimaryKeyBuilder,F as alias,Y as bigint,R as binary,Z as boolean,te as char,O as check,ie as customType,le as date,me as datetime,we as decimal,Se as double,$e as float,Ms as getTableConfig,js as getViewConfig,Ts as index,Ne as int,Ds as isMySqlSchema,je as json,We as longtext,Ie as mediumint,Re as mediumtext,Ns as mysqlDatabase,Qe as mysqlEnum,Fs as mysqlSchema,L as mysqlTableWithSchema,$ as mysqlViewWithSchema,Vs as primaryKey,Ke as real,Ee as serial,Ae as smallint,Ge as text,es as time,os as timestamp,ls as tinyint,He as tinytext,Qs as uniqueIndex,ps as varbinary,ds as varchar,bs as year};
//# sourceMappingURL=index.mjs.map
