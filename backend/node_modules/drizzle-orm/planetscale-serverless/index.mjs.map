{"version":3,"file":"index.mjs","sources":["../../src/planetscale-serverless/session.ts","../../src/planetscale-serverless/driver.ts"],"sourcesContent":[null,null],"names":["PlanetScalePreparedQuery","PreparedQuery","constructor","client","queryString","params","logger","fields","super","this","rawQuery","as","query","async","placeholderValues","fillPlaceholders","logQuery","joinsNotNullableMap","execute","then","eQuery","rows","map","row","mapResultRow","iterator","_placeholderValues","Error","PlanetscaleSession","MySqlSession","baseClient","dialect","tx","options","NoopLogger","prepareQuery","sql","all","querySql","sqlToQuery","transaction","pstx","session","PlanetScaleTransaction","MySqlTransaction","savepointName","nestedIndex","raw","result","err","PlanetscaleDriver","createSession","undefined","drizzle","config","MySqlDialect","DefaultLogger","MySqlDatabase"],"mappings":"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"}