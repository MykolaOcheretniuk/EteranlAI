{"version":3,"file":"index.cjs","sources":["../../src/libsql/session.ts","../../src/libsql/driver.ts"],"sourcesContent":[null,null],"names":["LibSQLSession","SQLiteSession","constructor","client","dialect","options","tx","super","this","logger","NoopLogger","prepareQuery","query","fields","PreparedQuery","sql","params","batch","queries","builtQueries","map","builtQuery","sqlToQuery","args","async","transaction","_config","libsqlTx","session","LibSQLTransaction","result","commit","err","rollback","SQLiteTransaction","savepointName","nestedIndex","run","raw","PreparedQueryBase","queryString","placeholderValues","fillPlaceholders","logQuery","stmt","execute","all","joinsNotNullableMap","values","then","rows","row","mapResultRow","Array","prototype","slice","call","v","value","ArrayBuffer","Buffer","from","TextDecoder","decode","Error","normalizeFieldValue","normalizeRow","obj","Object","keys","reduce","acc","key","propertyIsEnumerable","get","config","SQLiteAsyncDialect","DefaultLogger","undefined","BaseSQLiteDatabase"],"mappings":"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"}